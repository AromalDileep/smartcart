<!DOCTYPE html>
<html>
  <head>
    <title>Admin Dashboard – SmartCart</title>
    <link rel="stylesheet" href="/static/admin/styles.css" />
  </head>

  <body>
    <div class="container">
      <h1>Admin Dashboard</h1>

      <!-- Tabs -->
      <div class="tabs">
        <div class="tab active" data-tab="pending">Pending Products</div>
        <div class="tab" data-tab="approved">Approved Products</div>
        <div class="tab" data-tab="deleted">Deleted Products</div>
        <div class="tab" data-tab="orphans">Orphan Images</div>
        <div class="tab" data-tab="tools">Tools</div>
        <div style="margin-left: auto">
          <button id="logoutBtn">Logout</button>
        </div>
      </div>

      <!-- Pending Panel -->
      <div class="panel" id="pendingPanel">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h2>Pending Products</h2>
          <button
            id="trainAllBtn"
            class="btn-sm"
            style="background-color: #4caf50; color: white"
          >
            Train All Pending
          </button>
        </div>

        <table id="pendingTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Image</th>
              <th>Title</th>
              <th>Seller</th>
              <th>Created</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <!-- Load More button (Pending) -->
        <button
          id="pendingLoadMore"
          class="btn-sm"
          style="margin-top: 12px; display: none"
        >
          Load More
        </button>
      </div>

      <!-- Approved Panel -->
      <div class="panel" id="approvedPanel" style="display: none">
        <h2>Approved Products</h2>

        <table id="approvedTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Image</th>
              <th>Title</th>
              <th>Seller</th>
              <th>Approved</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <!-- Load More button (Approved) -->
        <button
          id="approvedLoadMore"
          class="btn-sm"
          style="margin-top: 12px; display: none"
        >
          Load More
        </button>
      </div>

      <!-- Deleted Panel -->
      <div class="panel" id="deletedPanel" style="display: none">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h2>Deleted Products</h2>
          <button
            id="deleteAllDeletedBtn"
            class="btn-sm"
            style="background-color: #f44336; color: white"
          >
            Delete All
          </button>
        </div>

        <table id="deletedTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Image</th>
              <th>Title</th>
              <th>Seller</th>
              <th>Created</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <!-- Load More button (Deleted) -->
        <button
          id="deletedLoadMore"
          class="btn-sm"
          style="margin-top: 12px; display: none"
        >
          Load More
        </button>
      </div>

      <!-- Orphan Images Panel -->
      <div class="panel" id="orphansPanel" style="display: none">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h2>Orphan Images</h2>
          <button
            id="cleanAllOrphansBtn"
            class="btn-sm"
            style="background-color: #f44336; color: white"
          >
            Clean All Unused Images
          </button>
        </div>

        <p>
          These images exist in the folder but are not linked to any product.
        </p>

        <table id="orphansTable">
          <thead>
            <tr>
              <th>Image</th>
              <th>Filename</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Tools Panel -->
      <div class="panel" id="toolsPanel" style="display: none">
        <h2>Admin Tools</h2>

        <!-- ⭐ NEW FAISS STATUS BOX ⭐ -->
        <div
          id="faissStatsBox"
          class="stat-box"
          style="
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
          "
        >
          <p>
            <strong>Total Products:</strong>
            <span id="stat_total_products">--</span>
          </p>
          <p>
            <strong>Approved Products:</strong>
            <span id="stat_approved_products">--</span>
          </p>
          <p>
            <strong>FAISS Vectors:</strong>
            <span id="stat_faiss_vectors">--</span>
          </p>
        </div>

        <button class="btn-sm" id="rebuildBtn">Rebuild FAISS Index</button>
        <button class="btn-sm" id="backupBtn">Backup FAISS Index</button>

        <p id="toolsStatus" style="margin-top: 10px"></p>
      </div>
    </div>

    <script src="/static/admin/app.js"></script>
  </body>
</html>
